# PROJECT MASK Default Configuration
# Code Replay System for Upwork Privacy

# =============================================================================
# Replay Configuration
# =============================================================================
replay:
  # Base typing speed in words per minute (60-120 typical for developers)
  base_wpm: 85

  # Standard deviation of WPM as a fraction of base (0.2 = 20% variance)
  wpm_variance: 0.2

  # Probability of making a typo per character (0.02 = 2%)
  typo_probability: 0.02

  # Probability of correcting a typo (0.95 = 95% correction rate)
  typo_correction_probability: 0.95

  # Probability of a "thinking" pause during typing (0.10 = 10%)
  thinking_pause_probability: 0.10

  # Minimum thinking pause duration in seconds
  thinking_pause_min: 3.0

  # Maximum thinking pause duration in seconds
  thinking_pause_max: 8.0

  # Fatigue factor - speed decrease per character typed (0.0005 = 0.05%)
  fatigue_factor: 0.0005

  # Enable bigram acceleration for common letter pairs
  bigram_acceleration: true

  # Bigram acceleration factor (0.6 = 40% faster)
  bigram_factor: 0.6

# =============================================================================
# Input Backend Configuration
# =============================================================================
input:
  # Delay after each keypress in seconds
  key_press_delay: 0.012

  # Base delay between characters when typing in seconds
  type_delay: 0.05

  # Delay after mouse movement in seconds
  mouse_move_delay: 0.05

  # Delay after mouse click in seconds
  click_delay: 0.1

# =============================================================================
# VS Code Controller Configuration
# =============================================================================
vscode:
  # Window title pattern for finding VS Code (regex)
  window_title_pattern: "Visual Studio Code"

  # Delay after Ctrl+P quick open before typing (ms)
  quick_open_delay: 300

  # Delay after Ctrl+G goto line before typing (ms)
  goto_line_delay: 200

  # Delay after Ctrl+S for save to complete (ms)
  save_delay: 500

  # Delay after opening a file to ensure it's loaded (ms)
  file_load_delay: 500

  # Number of retries for file open operations
  file_open_retries: 1

# =============================================================================
# Upwork Controller Configuration
# =============================================================================
upwork:
  # Mode: 'web' for browser-based, 'desktop' for app (desktop not available on ARM64)
  mode: web

  # Browser to use in web mode
  browser: firefox

  # Upwork time tracker URL
  url: "https://www.upwork.com/ab/account-security/login"

  # Delay after clicks in milliseconds
  click_delay: 200

  # Delay between characters when typing in milliseconds
  typing_delay: 50

  # Number of retries on UI interaction failure
  retry_count: 3

  # Timeout waiting for Upwork to be ready in seconds
  ready_timeout: 30

  # Calibrated UI element coordinates (set by calibration tool)
  # These are screen coordinates for UI automation
  coordinates:
    # Contract dropdown position
    contract_dropdown:
      x: 0
      y: 0
    # Memo/activity input field position
    memo_field:
      x: 0
      y: 0
    # Start/stop button position
    start_button:
      x: 0
      y: 0
    stop_button:
      x: 0
      y: 0
    # Screen resolution when calibrated
    screen_resolution:
      width: 1920
      height: 1080

# =============================================================================
# Session Orchestrator Configuration
# =============================================================================
orchestrator:
  # Interval between git polls in seconds (300 = 5 minutes)
  poll_interval: 300

  # Directory containing replay session files (relative to repo root)
  replay_dir: ".replay"

  # File tracking processed sessions
  processed_file: ".replay/.processed"

  # Git configuration
  git:
    # Git remote name
    remote: origin
    # Git branch to sync with
    branch: main

  # Number of consecutive failures before extended pause
  max_consecutive_failures: 3

  # Extended pause duration after max failures in seconds
  failure_pause: 600

# =============================================================================
# Logging Configuration
# =============================================================================
logging:
  # Log file path
  file: session.log

  # Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
  level: INFO

  # Maximum log file size in bytes (10MB)
  max_bytes: 10485760

  # Number of backup log files to keep
  backup_count: 5

  # Log format
  format: "%(asctime)s %(levelname)s [%(name)s] %(message)s"

  # Date format for log timestamps
  date_format: "%Y-%m-%d %H:%M:%S"

# =============================================================================
# Watchdog Configuration (Optional)
# =============================================================================
watchdog:
  # Enable watchdog process for emergency clock-out
  enabled: false

  # Watchdog check interval in seconds
  check_interval: 30

  # File used to signal watchdog of clock-in state
  state_file: ".watchdog_state"
