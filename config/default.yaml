# PROJECT MASK Default Configuration
# Code Replay System - Types code at human speeds for Upwork activity tracking

# =============================================================================
# Replay Configuration (Human-like Typing Simulation)
# =============================================================================
replay:
  # Base typing speed in words per minute (60-120 typical for developers)
  base_wpm: 85

  # Standard deviation of WPM as a fraction of base (0.2 = 20% variance)
  wpm_variance: 0.2

  # Probability of making a typo per character (0.02 = 2%)
  typo_probability: 0.02

  # Probability of correcting a typo (0.95 = 95% correction rate)
  typo_correction_probability: 0.95

  # Probability of a "thinking" pause during typing (0.10 = 10%)
  thinking_pause_probability: 0.10

  # Minimum thinking pause duration in seconds
  thinking_pause_min: 3.0

  # Maximum thinking pause duration in seconds
  thinking_pause_max: 8.0

  # Fatigue factor - speed decrease per character typed (0.0005 = 0.05%)
  fatigue_factor: 0.0005

  # Enable bigram acceleration for common letter pairs
  bigram_acceleration: true

  # Bigram acceleration factor (0.6 = 40% faster for common pairs like 'th', 'he')
  bigram_factor: 0.6

# =============================================================================
# Input Backend Configuration (xdotool)
# =============================================================================
input:
  # Delay after each keypress in seconds
  key_press_delay: 0.012

  # Base delay between characters when typing in seconds
  type_delay: 0.05

  # Delay after mouse movement in seconds
  mouse_move_delay: 0.05

  # Delay after mouse click in seconds
  click_delay: 0.1

# =============================================================================
# VS Code Controller Configuration
# =============================================================================
vscode:
  # Window title pattern for finding VS Code (regex)
  window_title_pattern: "Visual Studio Code"

  # Delay after Ctrl+P quick open before typing (ms)
  quick_open_delay: 300

  # Delay after Ctrl+G goto line before typing (ms)
  goto_line_delay: 200

  # Delay after Ctrl+S for save to complete (ms)
  save_delay: 500

  # Delay after opening a file to ensure it's loaded (ms)
  file_load_delay: 500

# =============================================================================
# AI Intervention Configuration
# =============================================================================
intervention:
  # Enable/disable AI intervention system
  # Set to false for backward compatibility or when API key is unavailable
  enabled: false

  # Interval between automatic checks in seconds
  # Default: 600 (10 minutes). Shorter intervals increase API costs.
  # Recommended range: 300-900 seconds
  interval_seconds: 600

  # Minimum time between recovery attempts in seconds
  # Prevents rapid-fire interventions that could make things worse
  min_cooldown_seconds: 60

  # Maximum recovery attempts before failing the session
  # After this many failed recoveries, the session will abort
  max_retries: 3

  # Minimum confidence to trigger recovery action (0.0 to 1.0)
  # Higher values = fewer false positives but may miss real issues
  # Recommended: 0.80-0.90
  confidence_threshold: 0.85

  # Screenshot backend: 'auto', 'mss', or 'scrot'
  # - auto: Use mss if available, fall back to scrot
  # - mss: Pure Python, fast, recommended
  # - scrot: X11 command-line tool, fallback for compatibility
  screenshot_backend: auto

  # Save screenshots for debugging
  # Screenshots are saved with timestamps for post-session review
  save_screenshots: true

  # Directory for saved screenshots (supports ~ expansion)
  screenshot_dir: "~/.mask/screenshots"

  # JPEG quality for screenshot compression (1-100)
  # Lower values = smaller files, faster uploads
  jpeg_quality: 85

  # Maximum screenshot dimension (larger images are scaled down)
  # Reduces API latency and costs
  max_screenshot_dimension: 1920

  # Claude model for analysis
  # Default: claude-opus-4-5-20251101 (Claude Opus 4.5)
  model: "claude-opus-4-5-20251101"

  # Perform intervention check after each file completes
  # Provides checkpoints between files for better coverage
  check_on_file_change: true

  # File verification settings
  verification:
    # Enable file content verification after replay
    enabled: true

    # Minimum similarity ratio to consider a match (0.0 to 1.0)
    # 0.98 = 98% similar content is acceptable
    match_threshold: 0.98

    # Minimum similarity for partial match (review recommended)
    partial_threshold: 0.90

    # Verify files when session completes
    verify_on_completion: true

# =============================================================================
# Logging Configuration
# =============================================================================
logging:
  # Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
  level: INFO

  # Log format
  format: "%(asctime)s %(levelname)s [%(name)s] %(message)s"
